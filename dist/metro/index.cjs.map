{"version":3,"sources":["../../src/expo/isExpoElectron.ts","../../src/metro/withExpoElectronAdapter.ts"],"names":[],"mappings":";;;AAGO,IAAM,qBAAA,GAAyB,OAAO,OAAA,KAAY,WAAA,IAAe,QAAQ,GAAA,IAAO,OAAA,CAAQ,IAAI,aAAA,IAAiB;;;ACA7G,IAAM,uBAAA,GAA0B,CAAC,MAAA,KAAuC;AAE7E,EAAA,IAAI,CAAC,qBAAA,EAAuB;AAAE,IAAA,OAAO,MAAA;AAAA,EAAO;AAE5C,EAAA,MAAM,sBAAA,GAAyB,OAAO,QAAA,CAAU,cAAA;AAEhD,EAAA,OAAO;AAAA,IACL,GAAG,MAAA;AAAA,IACH,QAAA,EAAW;AAAA,MACT,GAAG,MAAA,CAAO,QAAA;AAAA,MACV,SAAA,EAAY;AAAA,QACV,UAAA;AAAA,QAAY,GAAI,MAAA,CAAO,QAAA,CAAU,SAAA,IAAa;AAAC,OACjD;AAAA,MACA,cAAA,EAAgB,CAAC,OAAA,EAAS,UAAA,EAAY,QAAA,KAAa;AAGjD,QAAA,MAAM,YAAY,OAAA,CAAQ,gBAAA,IACR,CAAC,OAAA,CAAQ,gBAAA,CAAiB,SAAS,cAAc,CAAA;AACnE,QAAA,MAAM,cAAA,GAAiB,SAAA,GAAa,qBAAA,GAAwB,UAAA,GAAa,QAAA,GAAY,QAAA;AAErF,QAAA,IAAI,sBAAA,EAAwB;AAC1B,UAAA,OAAO,sBAAA,CAAuB,OAAA,EAAS,UAAA,EAAY,cAAc,CAAA;AAAA,QACnE;AACA,QAAA,OAAO,OAAA,CAAQ,cAAA,CAAe,OAAA,EAAS,UAAA,EAAY,cAAc,CAAA;AAAA,MAEnE;AAAA;AACF,GACF;AAEF","file":"index.cjs","sourcesContent":["// isMetroElectronConfig.ts\r\n// Checks if we're running in the context of the Metro Bundler for Electron.\r\n\r\nexport const isExpoElectronRuntime = (typeof process !== 'undefined' && process.env && process.env.EXPO_PLATFORM == \"electron\");","import { MetroConfig } from 'metro-config';\r\nimport { isExpoElectronRuntime } from '../expo/isExpoElectron';\r\n\r\nexport const withExpoElectronAdapter = (config : MetroConfig) : MetroConfig => {\r\n\r\n  if (!isExpoElectronRuntime) { return config }\r\n\r\n  const originalResolveRequest = config.resolver!.resolveRequest\r\n  \r\n  return {\r\n    ...config,\r\n    resolver : {\r\n      ...config.resolver,\r\n      platforms : [\r\n        \"electron\", ...(config.resolver!.platforms || [])\r\n      ],\r\n      resolveRequest: (context, moduleName, platform) => {\r\n      \r\n        // Only apply *.electron resolutions for component files in our app, and not for node_modules\r\n        const isAppCode = context.originModulePath && \r\n                          !context.originModulePath.includes('node_modules');\r\n        const targetPlatform = isAppCode ? (isExpoElectronRuntime ? \"electron\" : platform) : platform;\r\n        \r\n        if (originalResolveRequest) {\r\n          return originalResolveRequest(context, moduleName, targetPlatform);\r\n        }\r\n        return context.resolveRequest(context, moduleName, targetPlatform);\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n}"]}