{"version":3,"sources":["../../src/ElectronProvider/isElectron.ts","../../src/ElectronProvider/ElectronProvider.tsx"],"names":["createContext","jsxs","Fragment","jsx","useContext"],"mappings":";;;;;;;;AAGO,IAAM,UAAA,GAAc,OAAO,SAAA,KAAc,QAAA,IAAY,OAAO,SAAA,CAAU,SAAA,KAAc,QAAA,IAAY,SAAA,CAAU,SAAA,CAAU,OAAA,CAAQ,UAAU,CAAA,IAAK;ACClJ,SAAS,wBAAA,GAA8B;AACrC,EAAA,OAAOA,oBAAwB,IAAI,CAAA;AACrC;AAEA,IAAM,qBAAqB,wBAAA,EAA8B;AAElD,SAAS,oBAAoB,EAAE,IAAA,GAAO,CAAC,KAAK,CAAA,EAAG,UAAS,EAAkD;AAE/G,EAAA,MAAM,QAA8B,EAAC;AAErC,EAAA,IAAI,UAAA,EAAY;AAEd,IAAA,OAAA,CAAQ,IAAI,kDAAkD,CAAA;AAE9D,IAAA,KAAA,MAAW,OAAO,IAAA,EAAM;AACtB,MAAA,MAAM,GAAA,GAAO,OAAe,GAAG,CAAA;AAC/B,MAAA,IAAI,GAAA,EAAK;AACP,QAAA,KAAA,CAAM,GAAG,CAAA,GAAI,GAAA;AAAA,MACf,CAAA,MAAA,IAAW,OAAA,CAAQ,GAAA,CAAI,QAAA,KAAa,aAAA,EAAe;AACjD,QAAA,OAAA,CAAQ,IAAA;AAAA,UACN,CAAA,6BAAA,EAAgC,GAAG,CAAA,0FAAA,EACgD,GAAG,CAAA,UAAA;AAAA,SACxF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,EAAA,uBACEC,eAAA,CAAAC,mBAAA,EAAA,EACE,QAAA,EAAA;AAAA,oBAAAC,cAAA,CAAC,kBAAA,CAAmB,QAAA,EAAnB,EAA4B,KAAA,EAC1B,QAAA,EACH,CAAA;AAAA,IACE,UAAA,oBAAcA,cAAA,CAAC,QAAA,EAAA,EAAO,GAAA,EAAI,cAAA,EAAc;AAAA,GAAA,EAC5C,CAAA;AAEJ;AAEO,SAAS,mBAAA,GAA4B;AAE1C,EAAA,IAAI,CAAC,UAAA,EAAY;AACf,IAAA,MAAM,IAAI,MAAM,CAAA,uKAAA,CAAyK,CAAA;AAAA,EAC3L;AAEA,EAAA,MAAM,GAAA,GAAMC,iBAAW,kBAAkB,CAAA;AAEzC,EAAA,IAAI,CAAC,GAAA,EAAK;AACR,IAAA,MAAM,IAAI,KAAA;AAAA,MACR;AAAA,KACF;AAAA,EACF;AAEA,EAAA,OAAO,GAAA;AACT","file":"index.cjs","sourcesContent":["// isElectron.ts\r\n// Checks if we're running in the electron renderer process.\r\n\r\nexport const isElectron = (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0);","import React, { createContext, useContext } from \"react\";\r\nimport { isElectron } from \"./isElectron\";\r\n\r\n\r\nfunction createElectronApiContext<T>() {\r\n  return createContext<T | null>(null);\r\n}\r\n\r\nconst ElectronApiContext = createElectronApiContext<any>();\r\n\r\nexport function ElectronApiProvider({ apis = [\"api\"], children } : {apis: string[], children : React.ReactNode}) {\r\n  \r\n  const value : Record<string, any> = {}\r\n  \r\n  if (isElectron) {\r\n    \r\n    console.log(\"[ElectronProvider] Electron Environment Detected\")\r\n    \r\n    for (const key of apis) {\r\n      const api = (window as any)[key]\r\n      if (api) {\r\n        value[key] = api\r\n      } else if (process.env.NODE_ENV === \"development\") {\r\n        console.warn(\r\n          `[ElectronApiProvider] window.${key} not found` +\r\n          `Make sure your preload script exposes it via \\`contextBridge.exposeInMainWorld('${key}', ...)\\`.`\r\n        )\r\n      }\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      <ElectronApiContext.Provider value={value}>\r\n        {children}\r\n      </ElectronApiContext.Provider>\r\n      { isElectron && <script src=\"./preload.js\"/> }\r\n    </>\r\n  );\r\n};\r\n\r\nexport function useElectronProvider<T>(): T {\r\n  \r\n  if (!isElectron) {\r\n    throw new Error(`useElectronProvider can only be used in an electron renderer context. Ensure you are not using it in a component that does not render outside of the Electron renderer.`)\r\n  }\r\n  \r\n  const ctx = useContext(ElectronApiContext)\r\n  \r\n  if (!ctx) {\r\n    throw new Error(\r\n      \"useElectronProvider must be used within an ElectronApiProvider context. Ensure your app root is wrapped with ElectronApiProvider.\"\r\n    )\r\n  }\r\n  \r\n  return ctx as T\r\n}\r\n\r\nexport type TypedUseElectronHook<T> = () => T;\r\n\r\nexport { isElectron }"]}